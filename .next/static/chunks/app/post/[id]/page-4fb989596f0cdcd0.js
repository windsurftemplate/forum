(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[457],{2717:(e,t,s)=>{Promise.resolve().then(s.bind(s,3891))},773:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(7401).A)("ArrowBigUp",[["path",{d:"M9 18v-6H5l7-7 7 7h-4v6H9z",key:"1x06kx"}]])},6046:(e,t,s)=>{"use strict";var r=s(6658);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},3891:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>R});var r=s(5155),a=s(6046),n=s(2115),o=s(3312),i=s(6754),l=s(773);let c=(0,s(7401).A)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);var d=s(8166),u=s(1524),m=s(6611),h=s(3360),f="Avatar",[x,p]=(0,d.A)(f),[v,g]=x(f),b=n.forwardRef((e,t)=>{let{__scopeAvatar:s,...a}=e,[o,i]=n.useState("idle");return(0,r.jsx)(v,{scope:s,imageLoadingStatus:o,onImageLoadingStatusChange:i,children:(0,r.jsx)(h.sG.span,{...a,ref:t})})});b.displayName=f;var N="AvatarImage",j=n.forwardRef((e,t)=>{let{__scopeAvatar:s,src:a,onLoadingStatusChange:o=()=>{},...i}=e,l=g(N,s),c=function(e,t){let[s,r]=n.useState("idle");return(0,m.N)(()=>{if(!e){r("error");return}let s=!0,a=new window.Image,n=e=>()=>{s&&r(e)};return r("loading"),a.onload=n("loaded"),a.onerror=n("error"),a.src=e,t&&(a.referrerPolicy=t),()=>{s=!1}},[e,t]),s}(a,i.referrerPolicy),d=(0,u.c)(e=>{o(e),l.onImageLoadingStatusChange(e)});return(0,m.N)(()=>{"idle"!==c&&d(c)},[c,d]),"loaded"===c?(0,r.jsx)(h.sG.img,{...i,ref:t,src:a}):null});j.displayName=N;var w="AvatarFallback",y=n.forwardRef((e,t)=>{let{__scopeAvatar:s,delayMs:a,...o}=e,i=g(w,s),[l,c]=n.useState(void 0===a);return n.useEffect(()=>{if(void 0!==a){let e=window.setTimeout(()=>c(!0),a);return()=>window.clearTimeout(e)}},[a]),l&&"loaded"!==i.imageLoadingStatus?(0,r.jsx)(h.sG.span,{...o,ref:t}):null});y.displayName=w;var k=s(1567);let S=n.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(b,{ref:t,className:(0,k.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...a})});S.displayName=b.displayName;let A=n.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(j,{ref:t,className:(0,k.cn)("aspect-square h-full w-full",s),...a})});A.displayName=j.displayName;let P=n.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(y,{ref:t,className:(0,k.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...a})});P.displayName=y.displayName;var C=s(3860);function R(){let e=(0,a.useParams)(),[t,s]=(0,n.useState)(""),[d,u]=(0,n.useState)([]),m=(0,C.l)(e=>e.threads),h=(0,C.l)(e=>e.upvoteThread),f=m.find(t=>t.id===e.id);return f?(0,r.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,r.jsx)("div",{className:"bg-card rounded-lg p-6 mb-6 shadow-lg",children:(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,r.jsx)(o.$,{variant:"ghost",size:"icon",onClick:()=>{f&&h(f.id)},className:f.hasUpvoted?"text-primary":"",children:(0,r.jsx)(l.A,{className:"h-6 w-6"})}),(0,r.jsx)("span",{className:"font-bold",children:f.upvotes})]}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-4",children:f.title}),(0,r.jsx)("p",{className:"text-muted-foreground mb-4",children:f.content}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,r.jsxs)(S,{className:"h-6 w-6",children:[(0,r.jsx)(A,{src:f.author.avatar}),(0,r.jsx)(P,{children:f.author.name[0]})]}),(0,r.jsxs)("span",{children:["Posted by ",f.author.name]}),(0,r.jsx)("span",{children:"â€¢"}),(0,r.jsx)("span",{children:new Date(f.createdAt).toLocaleDateString()})]})]})]})}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("h2",{className:"text-xl font-bold flex items-center gap-2",children:[(0,r.jsx)(c,{className:"h-5 w-5"}),"Comments (",f.comments,")"]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i.T,{placeholder:"Write a comment...",value:t,onChange:e=>s(e.target.value),className:"min-h-[100px]"}),(0,r.jsx)(o.$,{onClick:()=>{if(t.trim()){let e={id:Date.now().toString(),content:t,author:"Current User",createdAt:new Date().toISOString(),upvotes:0};u(t=>[e,...t]),s("")}},children:"Post Comment"})]}),(0,r.jsx)("div",{className:"space-y-4",children:d.map(e=>(0,r.jsx)("div",{className:"bg-card rounded-lg p-4 shadow",children:(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[(0,r.jsxs)(S,{className:"h-8 w-8",children:[(0,r.jsx)(A,{src:"/placeholder-avatar.jpg"}),(0,r.jsx)(P,{children:e.author[0]})]}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)("span",{className:"font-semibold",children:e.author}),(0,r.jsx)("span",{className:"text-sm text-muted-foreground",children:new Date(e.createdAt).toLocaleDateString()})]}),(0,r.jsx)("p",{className:"text-sm",children:e.content})]})]})},e.id))})]})]}):(0,r.jsx)("div",{className:"max-w-4xl mx-auto p-6",children:(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:"Post not found"}),(0,r.jsx)("p",{className:"text-muted-foreground mt-2",children:"The post you're looking for doesn't exist or has been removed."})]})})}},3312:(e,t,s)=>{"use strict";s.d(t,{$:()=>c});var r=s(5155),a=s(2115),n=s(2317),o=s(1027),i=s(1567);let l=(0,o.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:s,variant:a,size:o,asChild:c=!1,...d}=e,u=c?n.DX:"button";return(0,r.jsx)(u,{className:(0,i.cn)(l({variant:a,size:o,className:s})),ref:t,...d})});c.displayName="Button"},6754:(e,t,s)=>{"use strict";s.d(t,{T:()=>o});var r=s(5155),a=s(2115),n=s(1567);let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...a})});o.displayName="Textarea"},6883:(e,t,s)=>{"use strict";s.d(t,{z:()=>n});var r=s(1319);class a{static getInstance(){return a.instance||(a.instance=new a),a.instance}connect(){this.socket&&this.socket.connect()}disconnect(){this.socket&&this.socket.disconnect()}emit(e,t){this.socket&&this.socket.emit(e,t)}on(e,t){this.socket&&this.socket.on(e,t)}off(e,t){this.socket&&this.socket.off(e,t)}constructor(){this.socket=null,this.socket=(0,r.io)("http://localhost:3001",{autoConnect:!1,reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3}),this.socket.on("connect",()=>{console.log("Connected to WebSocket server")}),this.socket.on("disconnect",()=>{console.log("Disconnected from WebSocket server")}),this.socket.on("error",e=>{console.error("WebSocket error:",e)})}}let n=a.getInstance()},1567:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var r=s(3463),a=s(9795);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,r.$)(t))}},3860:(e,t,s)=>{"use strict";s.d(t,{l:()=>n});var r=s(9827),a=s(6883);let n=(0,r.v)(e=>({threads:[],setThreads:t=>e({threads:t}),updateThread:t=>{e(e=>({threads:e.threads.map(e=>e.id===t.threadId?{...e,...void 0!==t.upvotes&&{upvotes:t.upvotes},...void 0!==t.comments&&{comments:t.comments},...void 0!==t.hasUpvoted&&{hasUpvoted:t.hasUpvoted}}:e)}))},upvoteThread:e=>{a.z.emit("thread:upvote",{threadId:e})}}))}},e=>{var t=t=>e(e.s=t);e.O(0,[290,262,441,517,358],()=>t(2717)),_N_E=e.O()}]);