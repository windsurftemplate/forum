(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[379],{3679:(e,s,r)=>{Promise.resolve().then(r.bind(r,6006))},773:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let a=(0,r(7401).A)("ArrowBigUp",[["path",{d:"M9 18v-6H5l7-7 7 7h-4v6H9z",key:"1x06kx"}]])},6046:(e,s,r)=>{"use strict";var a=r(6658);r.o(a,"useParams")&&r.d(s,{useParams:function(){return a.useParams}}),r.o(a,"useRouter")&&r.d(s,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(s,{useSearchParams:function(){return a.useSearchParams}})},6006:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>h});var a=r(5155),t=r(2115),n=r(6046),l=r(3909),i=r(6607),c=r(3312),d=r(3860);let o=e=>e.reduce((e,s)=>(s.categories.forEach(s=>{e.includes(s)||e.push(s)}),e),[]).sort();function m(){return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 mb-8",children:[(0,a.jsx)("div",{className:"w-20 h-8 bg-muted animate-pulse rounded-md"}),(0,a.jsx)("div",{className:"w-24 h-8 bg-muted animate-pulse rounded-md"}),(0,a.jsx)("div",{className:"w-28 h-8 bg-muted animate-pulse rounded-md"})]}),(0,a.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,a.jsx)("div",{className:"h-32 bg-muted animate-pulse rounded-lg"},e))})]})}function u(){let{threads:e}=(0,d.l)(),s=(0,n.useSearchParams)().get("category"),[r,l]=(0,t.useState)([]);(0,t.useEffect)(()=>{l(o(e))},[e]);let m=s?e.filter(e=>e.categories.includes(s)):e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 mb-8",children:[(0,a.jsx)(c.$,{variant:s?"outline":"default",asChild:!0,children:(0,a.jsx)("a",{href:"/categories",children:"All"})}),r.map(e=>(0,a.jsx)(c.$,{variant:s===e?"default":"outline",asChild:!0,children:(0,a.jsx)("a",{href:"/categories?category=".concat(encodeURIComponent(e)),children:e})},e))]}),(0,a.jsxs)("div",{className:"grid gap-4",children:[m.map(e=>(0,a.jsx)(i.B,{thread:e,currentUserId:"user-1"},e.id)),0===m.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"No threads found"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:s?'There are no threads in the "'.concat(s,'" category yet.'):"There are no threads available."})]})]})]})}function h(){return(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)(l.F,{}),(0,a.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Categories"}),(0,a.jsx)(t.Suspense,{fallback:(0,a.jsx)(m,{}),children:(0,a.jsx)(u,{})})]})]})}},6607:(e,s,r)=>{"use strict";r.d(s,{B:()=>w});var a=r(5155),t=r(2115),n=r(773),l=r(7401);let i=(0,l.A)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),c=(0,l.A)("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);var d=r(3860),o=r(3312),m=r(7485),u=r(1344),h=r(6754),x=r(9827),p=r(6883);let j=(0,x.v)(e=>({reports:[],bannedUsers:[],setReports:s=>e({reports:s}),setBannedUsers:s=>e({bannedUsers:s}),submitReport:e=>{p.z.emit("moderation:report",e)},resolveReport:(s,r)=>{p.z.emit("moderation:resolveReport",{reportId:s,action:r}),e(e=>({reports:e.reports.map(e=>e.id===s?{...e,status:"resolve"===r?"resolved":"dismissed"}:e)}))},banUser:(s,r,a)=>{let t=a?new Date(Date.now()+1e3*a).toISOString():null;p.z.emit("moderation:banUser",{userId:s,reason:r,bannedUntil:t}),e(e=>({bannedUsers:[...e.bannedUsers,{userId:s,reason:r,bannedAt:new Date().toISOString(),bannedUntil:t}]}))},unbanUser:s=>{p.z.emit("moderation:unbanUser",{userId:s}),e(e=>({bannedUsers:e.bannedUsers.filter(e=>e.userId!==s)}))},removeContent:(e,s)=>{p.z.emit("moderation:removeContent",{type:e,id:s})}}));var v=r(1567);function f(e){let{className:s,...r}=e;return(0,a.jsx)("div",{className:(0,v.cn)("animate-pulse rounded-md bg-muted",s),...r})}var g=r(6046),b=r(8173),N=r.n(b);function w(e){let{thread:s,currentUserId:r,isLoading:l=!1}=e,[x,p]=t.useState(""),[b,w]=t.useState(!1),{submitReport:y}=j(),k=(0,d.l)(e=>e.upvoteThread);return((0,g.useRouter)(),l)?(0,a.jsxs)("div",{className:"rounded-lg border p-4 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(f,{className:"h-8 w-8 rounded-full"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f,{className:"h-4 w-24"}),(0,a.jsx)(f,{className:"h-3 w-16"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f,{className:"h-6 w-3/4"}),(0,a.jsx)(f,{className:"h-20 w-full"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(f,{className:"h-8 w-24"}),(0,a.jsx)(f,{className:"h-8 w-24"})]})]}):s?(0,a.jsx)(N(),{href:"/post/".concat(s.id),className:"block",children:(0,a.jsxs)("div",{className:"rounded-lg border p-4 space-y-2 hover:bg-accent/50 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("img",{src:s.author.avatar,alt:s.author.name,className:"h-8 w-8 rounded-full"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:s.author.name}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:new Date(s.createdAt).toLocaleDateString()})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o.$,{variant:"ghost",size:"sm",className:(0,v.cn)("hover:bg-muted p-0 h-8 w-8",s.hasUpvoted&&"text-blue-500"),onClick:()=>{s&&k(s.id)},children:(0,a.jsx)(n.A,{className:"h-6 w-6"})}),(0,a.jsxs)(m.rI,{children:[(0,a.jsx)(m.ty,{asChild:!0,children:(0,a.jsxs)(o.$,{variant:"ghost",size:"icon",children:[(0,a.jsx)(i,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"More options"})]})}),(0,a.jsx)(m.SQ,{align:"end",children:(0,a.jsxs)(u.lG,{open:b,onOpenChange:w,children:[(0,a.jsx)(u.zM,{asChild:!0,children:(0,a.jsxs)(m._2,{onSelect:e=>e.preventDefault(),children:[(0,a.jsx)(c,{className:"mr-2 h-4 w-4"}),"Report"]})}),(0,a.jsxs)(u.Cf,{children:[(0,a.jsxs)(u.c7,{children:[(0,a.jsx)(u.L3,{children:"Report Thread"}),(0,a.jsx)(u.rr,{children:"Please provide a reason for reporting this thread. Our moderators will review your report."})]}),(0,a.jsx)(h.T,{value:x,onChange:e=>p(e.target.value),placeholder:"Enter your reason for reporting...",className:"min-h-[100px]"}),(0,a.jsxs)(u.Es,{children:[(0,a.jsx)(o.$,{variant:"outline",onClick:()=>w(!1),children:"Cancel"}),(0,a.jsx)(o.$,{onClick:()=>{s&&(y({threadId:s.id,reportedUserId:s.author.name,reporterUserId:r,reason:x}),w(!1),p(""))},disabled:!x.trim(),children:"Submit Report"})]})]})]})})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:s.title}),(0,a.jsx)("p",{className:"mt-2 text-muted-foreground",children:s.content})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)(o.$,{variant:"outline",size:"sm",children:[s.upvotes," Upvotes"]}),(0,a.jsxs)(o.$,{variant:"outline",size:"sm",children:[s.comments," Comments"]}),s.categories.map(e=>(0,a.jsx)("span",{className:"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold",children:e},e))]})]})}):null}},6754:(e,s,r)=>{"use strict";r.d(s,{T:()=>l});var a=r(5155),t=r(2115),n=r(1567);let l=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:s,...t})});l.displayName="Textarea"}},e=>{var s=s=>e(e.s=s);e.O(0,[290,262,794,909,441,517,358],()=>s(3679)),_N_E=e.O()}]);